You created an XCOM 2 Mod Project!

Rustys Takeover && changes from MrCloista's original mod;
redefined GEMS as General Energised Meld substance, that give psi abilities to psi amps ... created from crushed lost corpses
new GEMs icons
fixed Psi PCS' not having an icon
refined the create functions for Psi PCS' and GEMS 
Psi PCS' and GEMS pull their information/description text from the attached ability
Psi PCS' and GEMS can now be added/controlled by config file edits
only fit to 'Psi Amps'
NEW facilty
new faciltity upgrade with dynamic facility changes on purchases
4x staff slots shared over 2sci 2 eng, that all contribute to the projects, and half locked behind the upgrade
soldier training slot for psi-based passive that changes based on unit combat intelligence, locked behind an upgrade
full detailed drop down menu for soldier selection
new projects only show up in new facility
build items menu limited to the Psi-stuff, displays in 3D
built stuff shows in the event queue
inventory tab that displays Psi PCS' and GEMs only (and lost corpses)
psionics shortcut to avenger menus
... and all the bits that make the above 'work'

=====================================================================================

Help and inspiration;
https://steamcommunity.com/sharedfiles/filedetails/?id=1877861493 GeneMods              > Lots of help and info 
https://steamcommunity.com/sharedfiles/filedetails/?id=643812550  Craft Loot            > Minor tips
https://steamcommunity.com/sharedfiles/filedetails/?id=1529472981 Open SSAAT            > Avenger shortcut buttons

Visual Aids;
https://steamcommunity.com/sharedfiles/filedetails/?id=1281427768 UI mod for psi/def/mob
https://steamcommunity.com/sharedfiles/filedetails/?id=1128263618 Detailed Soldier Lists
https://steamcommunity.com/sharedfiles/filedetails/?id=1458945379 Extended Soldier Info
https://steamcommunity.com/sharedfiles/filedetails/?id=865667559  No Dropdown Lists - works fine in WOTC but ... 
https://steamcommunity.com/sharedfiles/filedetails/?id=2098062078 No Dropdown Lists with controller support < New WOTC specific version

Either one reqiured to see slots;
https://steamcommunity.com/sharedfiles/filedetails/?id=1122974240 Robo Jumpers Squad Select
https://steamcommunity.com/sharedfiles/filedetails/?id=1127491931 Mod Everything Reloaded

====================================================================================
====================================================================================
https://steamcommunity.com/sharedfiles/filedetails/?id=1992358680 Version 2
====================================================================================
====================================================================================

====================================================================================
====================================================================================
https://steamcommunity.com/sharedfiles/filedetails/?id=2222545926 Version 3
====================================================================================
====================================================================================
Team PEXM presents; [b]Psionics Ex Machina 3.0[/b].

Like many people, we've never been fond of the Vanilla Psi-Op, and whilst other psi overhauls have been around for a long time, they have tended to make the psionic operatives a little over powered for our tastes.
Inspired by how DerBK did ABB:Psionics, [b]MrCloista[/b] came up with this idea;
[code]
Psionics, as stated by Geist, are native to all humans, but it takes training and technology to draw it out. Well, as XCOM, we don't have the time for years of focused training. So it has come down to some highly experimental technology.
[/code]

[h1]New Mechanics:[/h1]
Psi-Lab is disabled, so vanilla Psi-Op is also. This is optional in the config file. In it's place is an entire NEW facility.
[list]
[*]Psionic abilities are now granted [i]exclusively by gear[/i].
[*][b]Psionics:[/b] The main Psionic Research is now unlocked by either Sectoid OR Priest autopsies.
[*][b]Psi Amps:[/b] Now grant a starting perk (default is Fuse) and provide Upgrade Slots (2/3/4). Psi Amps are still secondary weapons, and have been granted to all of the vanilla XCOM classes. This mod has support for the [url=https://steamcommunity.com/sharedfiles/filedetails/?id=1705464884] Dedicated Pistol Slot [/url], allowing Psi Amp use in that slot.
[*][b]NEW Resource: Crystallised MELD[/b]: Used to build PexM gear, and a callback to EU/EW.
[*][b]GEMs:[/b] Active Psi Abilities are granted by Weapon Upgrades, called GEMs, placed into the revamped Psi Amps. Yes, the new Psi Amp functionality was inspired by the Infinity Gauntlet. [url=https://steamcommunity.com/workshop/filedetails/discussion/2222545926/2944746708993932360/] GEMs List [/url]
[*][b]PCSs:[/b] Passive Psi Abilities are granted by Psi PCSs with a bonus to Psi Offense (42-69) and Will (1-10). [url=https://steamcommunity.com/workshop/filedetails/discussion/2222545926/2944746708993933765/] PCS List [/url]
[*][b]TECHs:[/b] There are 3 new Experimental Techs in the new facility [strike](and currently in the Proving Ground)[/strike], Experimental Psionics: PCS, Experimental Psionics: GEMs and Crystallised MELD Extraction.
[*][b]NEW FACILITY:[/b] An entire new facility dedicated to creating the above projects and minor Psionic training.
[*][b]Breakthroughs:[/b] 4 new breakthroughs, 1 to improve the slots of Psi Amps, 3 to cut the costs of the facility and it's upgrades.
[*][b]Loot Tables:[/b] All GEM upgrades and PCSs are fully lootable.
[*][b]Lost Corpses:[/b] Now have a decent use as the corpse required for the conversion project.
[/list]

[h1]Results:[/h1]
At maximum, this means that any soldier will be capable of around 100 PsiOffense, 1 Passive and a number of Active Psi Perks.
At the cost of a secondary weapon and other PCS as a trade off, making it a more interesting choice whether to take psionics or not.

[h1]Useful Info:[/h1]
[url=https://steamcommunity.com/sharedfiles/filedetails/?id=1128263618] Detailed Soldier Lists [/url] [strike]does not display Psi Offense like it does with the other Psi overhauls[/strike]. DSL has a config toggle to make it appear for rookies.This mod has options for always or for 'graded' units. 
[url=https://steamcommunity.com/sharedfiles/filedetails/?id=1281427768] UI Mod for Def/Mob/Psi [/url] allows you to see the PSI stat in the Armoury UI, but not elsewhere.
[url=https://steamcommunity.com/sharedfiles/filedetails/?id=1458945379] Extended Personal Info [/url] also lets you see the PSI stat in the Soldier List, but the actual abilities will only be visible on the weapon slots/pcs, except for the training grade perk.
[url=https://steamcommunity.com/sharedfiles/filedetails/?id=2276175904] Standardised Resource Bar [/url] will show the amount of MELD on most screens.

[h1]CONFIG:[/h1]
Lots of costs, and values and stuff can be changed in the config files.

[h1]Compatibility:[/h1]
[url=https://steamcommunity.com/workshop/filedetails/discussion/2222545926/2944746708996875655/][b]Please see discussion thread for any known conflicts and a list of all working perk packs[/b][/url].

[h1]Requirements:[/h1]
[list]
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1134256495] X2WOTCCommunityHighlander[/url] - v1.20 or more recent highlander (BETA) should work.
[/list][b]AND one of the below[/b][list]
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1127491931] Mod Everything Reloaded[/url] - Provides access to the PsiAmp's upgrade slots.
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1122974240] Robojumper's Squad Select [/url] - Provides access to the PsiAmp's upgrade slots. Requires 'Upgrade Icons Only for Primaries' to be unchecked in MCM.
[/list]

[h1]Credits:[/h1]
PexM Team Members;
[list]
[*][b]MrCloista[/b] - Original Concept and Project Lead
[*][b]RustyDios[/b] - Lead Developer
[*][b]dotvhs[/b] - Legacy 2D art
[*][b]nelVlesis[/b] - New 2D art
[*][b]Flashstriker[/b] - Lore/Flavour Text consultant
[/list]

[h1]Special Thanks To:[/h1]
Bstar, Iridar, Robojumper, Veehementia, PZ, Musashi, Mitzruti, Favid; et al for building the mods this is built upon.
Mitzruti and NotSoLoneWolf for helping with the code for the new research options.
Drakten for help with the loot tables.
DerBK for ABB which provided the inspiration for the idea.

Thanks to help from AstralDescend/Xymanek, RedDobe and Kdm2k6 for the UI fix to show resources and fixing issues with the Facility Project menus and general Facility/UI help.
Shoutout to Xylthixlm for XMB which the training perk drew inspiration from

Thanks also to the BETA testers; NelVlesis, Kexx, DragonKingAbashi, Drakten, ObelixDK, Amezzeray and CmdrEmily.

[b]Feedback would be greatly appreciated. Bug reports welcome.[/b]

~ Enjoy [b]!![/b] It was a team effort so it wouldn't be OK to ask for a [url=https://www.buymeacoffee.com/RustyDios] Cuppa Tea[/url] but I put a lot of personal work into this project so I'm going to ask anyway :)

=======================================================================================================
=======================================================================================================
Mod Compatibility List
=======================================================================================================
=======================================================================================================
Incompatible with mods reliant on the PsiLab, as this mod disables it by default. 
This can be changed in the config XComPsionicsExMachina, this option allows you to keep the vanilla lab and vanilla Psi-Ops. There will be some overlap with GEMs-slotted Psi Amps and class abilities. Vanilla Psi-Ops cannot train in the new facility, user caution is advised if enabling this option.

Incompatible with [url=https://steamcommunity.com/sharedfiles/filedetails/?id=1194081262] Utility Slot Sidearms[/url] and [url=https://steamcommunity.com/sharedfiles/filedetails/?id=1285163947] Utility Slot Sidearms Extended[/url] - it doesn't 'break' but the utility slot amps have some weird interactions, may or may not gain slots and can't accept the GEMs, user caution is advised if using these mods.

Number of slots given might have some odd interactions with [url=https://steamcommunity.com/sharedfiles/filedetails/?id=2091410349] Shiremct's Weapon Overhaul[/url] and [url=https://steamcommunity.com/sharedfiles/filedetails/?id=1171964288] Configure Upgrade Slots[/url]. I would advise checking on these mods files to ensure everything is the same.

Unfortunately I cannot add support for LWOTC's integrated pistol slot, LWOTC users will always have to make the hard choice of 'secondary or psionics'... but everything else is working okay in LWOTC :)

[h1][b]ALL the following are optional mods that ADD to the experience[/b][/h1]

[h1]PERK PACKS FOR GEMS AND PCS[/h1][list]
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1662114279] Iridar's More Psi Abilities[/url] - Provides abilities attached to the GEMs.
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=2115077818] Bstar's Perk Pack[/url] - Provides abilities attached to the GEMs and PCS.
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1561030099] Mitzruti Perk Pack[/url] - Provides lots of abilities attached to the GEMS and PCS.
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=2066389408] Mitzruti Perk Pack DLC[/url] - Provides even more abilities attached to the GEMs.
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1993868715] ABB Perk Pack[/url] - I think you get the idea by now :)
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1546482849] Favid's Extended Perk Pack[/url] - ;)
[/list]
If loot is rolled for a pack you [i]don't[/i] have it is instead converted to MELD!

[h1]ITEM MODS[/h1][list]
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1705464884] Dedicated Pistol Slot[/url] - Provides an additional 'Sidearm' tertiary slot which this mod allows Psi Amps to be equipped in. Currently Vanilla Classes, RPGO, Proficiency Classes and MrCloistas class pack are supported natively.
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=2164176007] Cut Content Psionics[/url] - with some exception to their Psi PCSs from a balance perspective. PexM PCSs are the main driver behind a soldier's psionic strength, so will have a much higher PsiOffense boost, as well as providing a passive ability.
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1619292810] Chosen Reward Variety[/url] - Warlock Psi Amp gets a bonus slot to beam tier.
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=2024073766] Caster Gauntlets[/url] - Behave the same way as Shard Gauntlets.
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1549781357] PZ Psionic Melee[/url] - Full Support for Slots, classes and breakthroughs, psi anims, gets normal slot allowance and 'Rend'
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1467502437] No More Psi Amps[/url] - Full Support for Slots, classes and breakthroughs, psi anims
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=2224463798] Psionic Implants[/url] - Pretty much designed with Psioncs Ex Machina in mind, as an alternative to the above
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1144417938] Ashlynne_Lee's ADVENT Warlock[/url] - Psionic Weapons Tech and Psi-infused grenades can also be completed in the new facility. Although no one will be able to actually use the weapon without changes to the XComClassData.ini 
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1505294997] Armoured Vipers[/url] - The Psi Gatling Rifle from this mod needs adding to XComClassData.ini of classes you want to be able to use the gun.
[/list]
The lines you want for the above two mods are;
[code]
+AllowedWeapons=(SlotType=eInvSlot_PrimaryWeapon, WeaponType="psionicReaper")
+AllowedWeapons=(SlotType=eInvSlot_PrimaryWeapon, WeaponType="psigatlingrifle")
[/code]

[h1]CLASS MODS[/h1][list]
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1218007143] Playable Aliens[/url] - Sectoid Psi Amps get one less slot per tier and no starting perk
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1125004715] Biotic Class[/url] - Amp gets one less slot per tier and no starting perk
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1138411890] Psionics Class[/url] - Should work fine with the same 'issues' highlighted for vanilla Psi-Ops above. There will be some overlap with GEMs-slotted Psi Amps and class abilities
[*][url=https://steamcommunity.com/sharedfiles/filedetails/?id=1137913176] Necromancer Class[/url] - Staves are supported weapons for GEMs at a -2 rate to psi amps, with no free perk. Necromancers can already use psi-amps in their secondary.
[/list]
Support is added for Shiremct's Proficiency Classes, ABB:TLE Classes, LWotC Classes and RPGO. Any further classes and packs can be added to the config files: [i]XComClassData.ini[/i] and [i]XComPistolSlot[/i] following the numerous examples.

=======================================================================================================
=======================================================================================================
UILibrary_PexM.Tech_Images.BT_modpsiamp
UILibrary_PexM.Tech_Images.BT_PexMChamber1
UILibrary_PexM.Tech_Images.BT_PexMChamber2
UILibrary_PexM.Tech_Images.BT_PexMChamber3

UILibrary_PexM.FacilityIcons.ChooseFacility_PexMLab
UILibrary_PexM.FacilityIcons.ChooseFacility_PexMLab_Secondcell
UILibrary_PexM.FacilityIcons.ChooseFacility_PexMLab_Testbed

UILibrary_PexM.Inventory.Gemstone_Inert     ;outdated, sphere
UILibrary_PexM.Inventory.Gemstone_InertGrey	;meld
UILibrary_PexM.Inventory.Gemstone_Yellow	;favids
UILibrary_PexM.Inventory.Gemstone_Amber		;abb
UILibrary_PexM.Inventory.Gemstone_Blue		;mitzruti
UILibrary_PexM.Inventory.Gemstone_Green		;bstars
UILibrary_PexM.Inventory.Gemstone_Red		;Iridars
UILibrary_PexM.Inventory.Gemstone_Purple	;base

UILibrary_PexM.Inventory.UIPerk_combatstim_psi

UILibrary_PexM.Tech_Images.TECH_GEM_PSI			;unused, circle of gems
UILibrary_PexM.Tech_Images.TECH_PSI
UILibrary_PexM.Tech_Images.TECH_PSI_GEM
UILibrary_PexM.Tech_Images.TECH_PSI_PCS
UILibrary_PexM.Tech_Images.TECH_PSI_CNV         ;if autopsy NOT lost 
UILibrary_PexM.Tech_Images.TECH_PSI_CNV_LOST    ;if autopsy IS lost 
UILibrary_PexM.Tech_Images.TECH_PSI_LOST_PG		;unused lost autopsy in gold colour
UILibrary_PexM.Tech_Images.TECH_PSI_LOST_R		;unused lost autopsy in blue colour

UILibrary_PexM.Icons.UIPerk_psionicboost1
UILibrary_PexM.Icons.UIPerk_psionicboost2
UILibrary_PexM.Icons.UIPerk_psionicboost3
UILibrary_PexM.Icons.UIPerk_psionicboost4
UILibrary_PexM.Icons.UIPerk_psionicboost5
UILibrary_PexM.Icons.UIPerk_rapidpsionics

=====================================================================================

TODO:
    ADD Covert Actions to get Meld
	ADD WeaponAttachmentsUI right hand description box size changer

    Investigate - Cosmetic Slot gremlins don't remove if the Psi-Amp is given to a Specialist << BASE GAME BUG with cosmetic units
	Investigate - // <> TODO Can Staff adjust the required items//costs ?
    
    ADD on MODS for MELD to be a cost of GeneMods, Augments, Infirmary Ex Mortis .... more ?
    
    The below are 'kinda covered' by opening the PCS/GEM list to config, but maybe we still want 'default' options ?
        Investigate Long War Perk Pack options
            https://steamcommunity.com/sharedfiles/filedetails/?id=1335226018
            https://steamcommunity.com/sharedfiles/filedetails/?id=1790938526
        Investigate Shadow Ops Perk Pack options
            https://steamcommunity.com/sharedfiles/filedetails/?id=1519841231
        Investigate other classes (Iridars Stormrider Perks, Biotics, Wardens, Fixers, Grimys Fury, Program etc)
            Can we copy/clone any to make cool psi abilities, seek permission first

	FIX ANIM MAP and positions ... 
		AVG_PaxMLab_A_Anim.CineDummy needs to be changed to AVG_PexMLab_A_Anim.CineDummy
		this allows animated pawns to show up, but they are all still in 'default psi lab' positions
